all: mrnet

mrnet: 	path
	wget ftp://ftp.cs.wisc.edu/paradyn/mrnet/mrnet_4.1.0.tar.gz
	tar -xf mrnet_4.1.0.tar.gz
	cp mrnet_includes/Network.h mrnet_4.1.0/include/mrnet ; cp mrnet_includes/Stream.h mrnet_4.1.0/include/mrnet
	cd mrnet_4.1.0; ./configure --prefix=${ROOT_PATH}/mrnet/lib
	cd mrnet_4.1.0/build/*/; make all; make install
	export LD_LIBRARY_PATH=${ROOT_PATH}/mrnet/lib/lib:$LD_LIBRARY_PATH
	cp mrnet_4.1.0/build/*/xplat_*.h lib/include/xplat
	cp mrnet_4.1.0/build/*/mrnet_*.h lib/include/mrnet
	rm -r mrnet_4.1.0 mrnet_4.1.0.tar.gz

path:
	rm -rf lib
	mkdir lib/
	echo "#!/bin/sh" > sourced.file
	echo "export LD_LIBRARY_PATH=${ROOT_PATH}/mrnet/lib/lib:${LD_LIBRARY_PATH}"  >> sourced.file
	mv sourced.file lib/

clean:
	rm -fr xdotool
